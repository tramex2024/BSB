<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="/images/bsb-logo.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSB - Bitmart Spot Bots</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos base que no cambian */
        .overflow-y-auto::-webkit-scrollbar { width: 6px; }
        .overflow-y-auto::-webkit-scrollbar-track { background: #1f2937; }
        .overflow-y-auto::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        
        .nav-tab.active { border-bottom: 2px solid #10b981; color: #10b981; font-weight: bold; }
        .nav-tab { padding: 10px 15px; color: #9ca3af; transition: all 0.3s ease; cursor: pointer; }
        .nav-tab:hover { color: white; }

        /* Contenedor principal con altura mínima para evitar saltos de layout */
        #main-content { min-height: calc(100vh - 100px); }

        .modal {
            position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.8); display: none; justify-content: center; align-items: center;
        }
        .modal-content { background-color: #1f2937; padding: 25px; border-radius: 12px; width: 90%; max-width: 450px; }

        .status-ball-container { position: relative; width: 12px; height: 12px; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } }
        .status-green { background-color: #10b981; box-shadow: 0 0 8px #10b981; animation: pulse 2s infinite; }
        .status-red { background-color: #ef4444; }
        .status-purple { background-color: #a855f7; box-shadow: 0 0 8px #a855f7; animation: pulse 2s infinite; }

        .animate-fadeIn { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">

    <header class="h-16 flex items-center justify-between px-6 bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
        <div class="flex items-center space-x-4">
            <img src="images/bsb-logo.png" alt="Logo" class="w-10 h-10">
            <span class="hidden md:block font-bold text-xl tracking-tight">Bitmart <span class="text-emerald-500">Spot Bots</span></span>
            <div class="status-ball-container ml-2">
                <span id="status-dot" class="h-full w-full rounded-full status-red block" title="Estado de Conexión"></span>
            </div>
        </div>
        
        <nav id="main-nav" class="flex space-x-1">
            <a class="nav-tab active" data-tab="dashboard">DASHBOARD</a>
            <a class="nav-tab" data-tab="autobot">AUTOBOT</a>
            <a class="nav-tab" data-tab="aibot">AIBOT</a>
        </nav>
        
        <div class="flex items-center space-x-5 text-gray-400">
            <i class="fas fa-sign-in-alt cursor-pointer hover:text-white transition" id="login-logout-icon" title="Login"></i>
            <i class="fas fa-cog cursor-pointer hover:text-white transition" title="Settings"></i>
            <i class="fas fa-key cursor-pointer hover:text-white transition" id="api-key-icon" title="API Config"></i>
        </div>
    </header>

    <div id="log-bar" class="bg-black/30 py-1 px-6 border-b border-gray-800 text-[11px] text-gray-500 font-mono italic">
        <p id="log-message">Sincronizando con Bitmart API...</p>
    </div>

    <main id="main-content" class="relative overflow-x-hidden">
        <div class="flex items-center justify-center h-64">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"></div>
        </div>
    </main>

    <div id="api-modal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold">BitMart API</h2>
                <i class="fas fa-times cursor-pointer" id="close-api-modal"></i>
            </div>
            <form id="api-form" class="space-y-4">
                <input type="text" id="api-key" placeholder="API Key" class="w-full p-3 bg-gray-900 rounded-xl border border-gray-700 outline-none focus:border-emerald-500">
                <input type="password" id="secret-key" placeholder="Secret Key" class="w-full p-3 bg-gray-900 rounded-xl border border-gray-700 outline-none focus:border-emerald-500">
                <button type="submit" class="w-full bg-emerald-600 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors">VALIDAR CONEXIÓN</button>
                <p id="api-status-message" class="text-xs text-center text-gray-500"></p>
            </form>
        </div>
    </div>

    <script src="https://s3.tradingview.com/tv.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <script type="module" src="/js/main.js"></script>
    <div id="auth-modal" class="modal">
    <div class="modal-content animate-fadeIn">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold">Acceso de Usuario</h2>
            <i class="fas fa-times cursor-pointer hover:text-red-400" id="close-auth-modal"></i>
        </div>
        <form id="auth-form" class="space-y-4">
            <div id="email-section">
                <label class="text-xs text-gray-400 block mb-1">Correo Electrónico</label>
                <input type="email" id="email" placeholder="tu@email.com" required
                    class="w-full p-3 bg-gray-900 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none">
            </div>
            <div id="token-section" style="display: none;">
                <label class="text-xs text-gray-400 block mb-1">Código de Verificación</label>
                <input type="text" id="token" placeholder="Ingresa el código" 
                    class="w-full p-3 bg-gray-900 rounded-xl border border-gray-700 focus:border-emerald-500 outline-none">
            </div>
            
            <button type="submit" id="auth-button" 
                class="w-full bg-emerald-600 py-3 rounded-xl font-bold hover:bg-emerald-700 transition-colors">
                CONTINUAR
            </button>
            <p id="auth-message" class="text-xs text-center"></p>
        </form>
    </div>
</div>
</body>
</html>